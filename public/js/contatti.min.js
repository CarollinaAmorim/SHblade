$(document).ready(function () {

    var pulsanteMenu = $("div#espandi_menu"),
        imgPulanteMenu = $("div#espandi_menu > img"),
        linkMenu = $("nav[role=menu] ul a");

    function oscuraPagina() { $("<div id='oscura'></div>").appendTo("body").hide().fadeIn(1000); }
    function eliminaOscuraPagina() { $("div#oscura").remove(); }

    imgPulanteMenu.eq(1).hide();
    $("nav[role=menu] *").hide();

    function animateML(){
        var larghezzaSchermo = $(window).width();
        if(larghezzaSchermo >= 1360){
            pulsanteMenu.hide().animate({left: "30%", marginLeft: "-50px"}, 750);
            $("nav[role=menu]").animate({width: "30%"}, 750);
        }
        else if(larghezzaSchermo <= 1270){
            pulsanteMenu.hide().animate({left: "90%", marginLeft: "-20px"}, 750);
            $("nav[role=menu]").animate({width: "90%"}, 750);
        }
        else{
            pulsanteMenu.hide().animate({left: "30%", marginLeft: "-25px"}, 750);
            $("nav[role=menu]").animate({width: "30%"}, 750);
        }
    }

    imgPulanteMenu.eq(0).click(function () {
        linkMenu.css("width", "0%");
        animateML();
        imgPulanteMenu.eq(0).hide();
        imgPulanteMenu.eq(1).show();
        pulsanteMenu.delay(800).fadeIn(1000);
        oscuraPagina();

        $("nav[role=menu] > img").delay(750).fadeIn();
        $("nav[role=menu] > ul, nav[role=menu] ul *").delay(1000).fadeIn();
        linkMenu.eq(0).delay(50).animate({width: "100%"});
        linkMenu.eq(1).delay(100).animate({width: "100%"});
        linkMenu.eq(2).delay(150).animate({width: "100%"});
        linkMenu.eq(3).delay(200).animate({width: "100%"});
        linkMenu.eq(4).delay(250).animate({width: "100%"});
        linkMenu.eq(5).delay(300).animate({width: "100%"});
    });

    function initML(){
        var larghezzaSchermo = $(window).width();
        if(larghezzaSchermo >= 1360){
            pulsanteMenu.hide().animate({left: "0%", marginLeft: "50px"}, 750);
        }
        else if(larghezzaSchermo <= 1270){
            pulsanteMenu.hide().animate({left: "0%", marginLeft: "0px"}, 750);
        }
        else{
            pulsanteMenu.hide().animate({left: "0%", marginLeft: "25px"}, 750);
        }
    }

    function InitStatus(){
        $("nav[role=menu] *").fadeOut(100);
        initML();
        $("nav[role=menu]").animate({width: "0%"}, 750);
        imgPulanteMenu.eq(1).hide();
        imgPulanteMenu.eq(0).show();
        pulsanteMenu.fadeIn(1000);
        eliminaOscuraPagina();
    }

    imgPulanteMenu.eq(1).click(function () {
        InitStatus();
    });

    $('#oscura').click(function(){
        InitStatus();
    });

    var CorniceDestra    = $('#barra_destra'),
        UL               = CorniceDestra.find('ul'),
        LIslide          = UL.find('.cerchio'),
        Slide            = $('article.vs-section'),
        dimLI            = 10,// altezza li
        marginBottomLI   = 20,// margin bottom li
        nLI              = Slide.length,
        heightUL         = ((dimLI + marginBottomLI) * nLI)+20+60,
        heightContainer  = 260, // altezza del contenitore ul
        close            = 0,
        marginTopULopen  = (heightContainer - heightUL)/2,
        marginTopULclose = 90,
        Tempo            = 500;// altezza container - 20px li marginTop - 60 altezza prev e next, diviso 2

    CorniceDestra.hover(function(){
        UL.animate({'margin-top':marginTopULopen + 'px'},Tempo);
        LIslide.animate({'height':dimLI + 'px','margin-bottom':marginBottomLI + 'px'},Tempo);
    }, function(){
        UL.animate({'margin-top':marginTopULclose+'px'},Tempo);
        LIslide.animate({'height':close+'px','margin-bottom':close+'px'},Tempo);
    });
});
$(document).ready(function () {


    var Icampi = $("#nome,#sobrenome,#email,#telefone"),
        Tmess = $('#mensagem'),
        tempo = 500;

    Icampi.focusin( function(){
        $(this).animate({'margin-bottom' : '-58px'}, tempo);
    });
    Icampi.focusout( function(){
        if(!$(this).val()){
            $(this).animate({'margin-bottom' : '5px'}, tempo);
        }
    });

    Tmess.focusin( function(){
        $(this).animate({'margin-bottom' : '-80px'}, tempo);
        $(this).parent().animate({'height':'95px'},tempo);
    });
    Tmess.focusout( function(){
        if(!$(this).val()){
            $(this).animate({'margin-bottom' : '-18px'}, tempo);
            $(this).parent().delay(tempo).animate({'height':'62px'},tempo);
        }
    });



    $("#bottone").click(function(){

        //associo variabili generali
        var nome = $("#nome").val();
        var sobrenome = $("#sobrenome").val();
        var mensagem = $("#mensagem").val();
        var email = $("#email").val();
        var telefone = $("#telefone").val();
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

        if(!emailReg.test(email)){alert("Email scritta in modo non corretto");
        }else if(nome == "" || sobrenome == "" || email == "" || telefone == "" || mensagem == ""){
            alert("Compila tutti i campi richiesti con l'asterisco!");
        }else{

            $.ajax({

                type: "POST",
                url: "http://simoneheringer.com.br/engine/form.php",
                data: "nome=" + nome + "&sobrenome=" + sobrenome + "&email=" + email  + "&mensagem=" + mensagem + "&telefone=" + telefone,
                dataType: "html",
                success: function(msg)
                {
                    alert("Email inviata con successo!");
                    window.location.href = "http://simoneheringer.com.br";
                },
                error: function(){alert("Si e' verificato un errore imprevisto...");}

            });
        }
    });
});

if (navigator.userAgent.toLowerCase().indexOf("chrome") >= 0) {
    $(window).load(function(){
        $(':-webkit-autofill').each(function(){
            $(this).after(this.outerHTML).remove();
        });
    });
}